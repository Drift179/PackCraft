<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>CRAFT PACK - BIBLIOTECA</title>
    <link rel="icon" type="image/png" href="file:///C:/Users/Usu%C3%A1rio/Downloads/WhatsApp%20Image%202026-02-08%20at%2021.09.10.jpeg">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        body { background: #000; color: #fff;  font-family: 'Press Start 2P';
      background: #000; color: white; 
          padding: 20px;
    min-height: 100vh;


    background-image: url("https://minecraft.wiki/images/thumb/End_Poem_background_BE.png/507px-End_Poem_background_BE.png?4231b");
    background-size: cover;
        }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 25px; }
        .card { background: #333; border: 4px solid #000; border-top-color: #555; padding: 15px; }
        .card img { width: 100%; height: 150px; object-fit: cover; border: 3px solid #000; }
        .mc-btn-s { background: #AAAAAA; border: 3px solid #000; border-top-color: #DDD; color: #fff; padding: 10px; cursor: pointer; width: 100%; font-size: 8px; margin-top: 10px; }
        .stars { color: #ffff55; font-size: 10px; margin: 10px 0; }
        .comm-box { background: #111; padding: 10px; margin-top: 10px; font-size: 7px; max-height: 80px; overflow-y: auto; text-align: left; }
        input { background: #000; border: 1px solid #555; color: #fff; width: 70%; font-size: 7px; padding: 5px; }
    </style>
</head>
<body>
    <div style="background:#111; padding:20px; margin-bottom:30px; display:flex; justify-content:space-between; align-items:center;">
        <span style="color:#ffff55;">BIBLIOTECA DE MODS</span>
        <button class="mc-btn-s" onclick="location.href='home.html'" style="width:auto;">VOLTAR</button>
    </div>
    <div class="grid" id="li"></div>

    <script>
        let mods = JSON.parse(localStorage.getItem("meus_mods") || "[]");
        const eu = sessionStorage.getItem("logado");
        const div = document.getElementById("li");

        function render() {
            div.innerHTML = "";
            mods.forEach((m, i) => {
                if(m.aprovado || eu === 'adriano') {
                    const media = m.votos > 0 ? (m.estrelas / m.votos).toFixed(1) : "0";
                    div.innerHTML += `
                    <div class="card">
                        <img src="${m.foto}">
                        <h3 style="font-size:10px; color:#fff;">${m.nome.toUpperCase()}</h3>
                        <div class="stars">‚≠ê ${media} (${m.votos} votos)</div>
                        
                        <button class="mc-btn-s" style="background:#555" onclick="votar(${i})">AVALIAR (1-5)</button>
                        <button class="mc-btn-s" onclick="bx(${i})">DOWNLOAD</button>

                        <div class="comm-box" id="comms-${i}">
                            ${m.comentarios.map(c => `<div style="margin-bottom:5px;">> ${c}</div>`).join('')}
                        </div>
                        <div style="margin-top:5px;">
                            <input id="in-${i}" placeholder="Comentar...">
                            <button onclick="comentar(${i})" style="font-size:7px; cursor:pointer;">OK</button>
                        </div>
                    </div>`;
                }
            });
        }

        function votar(i) {
            const nota = parseInt(prompt("Deixe sua nota de 1 a 5:"));
            if(nota >= 1 && nota <= 5) {
                mods[i].estrelas += nota;
                mods[i].votos++;
                save();
            }
        }

        function comentar(i) {
            const txt = document.getElementById("in-" + i).value;
            if(txt) {
                mods[i].comentarios.push(eu + ": " + txt);
                save();
            }
        }

        function bx(i) {
            const a = document.createElement("a"); a.href = mods[i].fileData; a.download = mods[i].fileName; a.click();
        }

        function save() {
            localStorage.setItem("meus_mods", JSON.stringify(mods));
            render();
        }

        render();
    </script>
</body>
</html>